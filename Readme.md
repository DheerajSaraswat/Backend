# backend repo

multer.middleware.js

1. import multer from "multer"; This line imports the multer module from the npm package.
2. const storage = multer.diskStorage({ ... }); This line creates a storage engine that will store the uploaded files on the disk. The storage engine takes an object with two functions: destination and filename.
3. destination: function (req, file, cb) { ... } This function determines the folder where the file will be saved. It takes three parameters: req, which is the request object; file, which is the file object; and cb, which is a callback function. The callback function takes two arguments: an error (if any) and the destination path. In this case, the destination path is ./public/temp, which means the files will be stored in a folder named temp inside the public folder.
4. filename: function (req, file, cb) { ... } This function determines the name of the file within the destination folder. It takes the same parameters as the destination function. The callback function takes two arguments: an error (if any) and the filename. In this case, the filename is generated by concatenating the file field name, a unique suffix based on the current timestamp and a random number, and the file extension. This ensures that the filenames are unique and do not overwrite each other.
5. export const upload = multer({ storage }); This line creates a multer instance with the storage engine defined above and exports it as a constant named upload. This multer instance can be used as a middleware in Express routes to handle file uploads.